#!/usr/bin/env zsh

# Set the current tmux session's working directory to pwd
# New windows/panes will open in this directory

if [[ -z $TMUX ]]; then
    echo "not in a tmux session"
    exit 1
fi

session_name=$(tmux display-message -p '#S')
cwd=$(pwd)

(TMUX= tmux attach-session -t "$session_name" -c "$cwd" -d) &>/dev/null &
disown

echo "session '$session_name' working directory set to: $cwd"
